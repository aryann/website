<!doctype html>
<html lang="end">
  <head>
    <meta charset="utf-8" />
    <meta name="author" content="Aryan Naraghi" />
    <meta name="description" content="Aryan Naraghi's website" />
    <title>{{ page.title }}</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />

    <style type="text/css">
      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
      }

      body {
        display: none;
        overflow: hidden;
      }

      #box {
        background-color: lightgoldenrodyellow;
        border: 1px solid lightgrey;
        bottom: 0;
        position: absolute;
        right: 0;
        width: 420px;
        z-index: 1;
      }

      #content {
        padding: 15px;
      }

      #content p {
        margin-top: 0;
      }

      #button a {
        display: block;
        padding: 15px;
        border-bottom: 1px solid lightgrey;
      }

      table {
        border-collapse: separate;
      }

      td {
        padding: 15px;
        padding-right: 0;
      }

      th {
        text-align: left;
        padding: 15px;
        padding-left: 0;
        border-right: 1px solid lightgrey;
      }

      #c {
        left: 0;
        position: absolute;
        top: 0;
        z-index: 0;
      }

      {% include style.css %}
    </style>

    <script type="text/javascript">
      {% include analytics.js %}
      {% include utils.js %}
    </script>
  </head>

  <body>
    {{ content }}

    <script type="text/javascript">
      (function() {
        var isHidden = function(element) {
          return element.style.display === "none";
        }

        var url = document.URL.split("#")[0];
        var boxDisplayKey = url + ".box_display";

        var toggle = document.getElementById("toggleBox");
        var content = document.getElementById("content");
        if (toggle && content) {
          var state = window.localStorage.getItem(boxDisplayKey);
          if (state !== null) {
            content.style.display = state;
          }

          var updateToggleBoxLink = function() {
            toggle.innerHTML = (isHidden(content) ?
                "&laquo; Show the box." :
                "Hide this box. &raquo;");
          }
          updateToggleBoxLink();

          toggle.onclick = function() {
            content.style.display = isHidden(content) ? "block" : "none";
            window.localStorage.setItem(boxDisplayKey, content.style.display);
            updateToggleBoxLink();
            _gaq.push(["_trackEvent", "infoBox", "toggle", "isVisible",
                       Number(isHidden(content))]);
          }
        }

        // Don't show anything until the document is ready.
        document.getElementsByTagName("body")[0].style.display = "block";
      })();
    </script>
  </body>
</html>
